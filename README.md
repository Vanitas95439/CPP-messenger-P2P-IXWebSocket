# üîê Encrypted P2P WebSocket Chat (Diffie‚ÄìHellman)

–£—á–µ–±–Ω—ã–π C++‚Äë–ø—Ä–æ–µ–∫—Ç: **peer‚Äëto‚Äëpeer —á–∞—Ç –ø–æ WebSocket —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–≤–µ—Ä—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `ixwebsocket`.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

* —Ä–∞–±–æ—Ç—É —Å —Å–µ—Ç–µ–≤—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ (WebSocket),
* –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∫–æ–ª–±—ç–∫–∏ –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å,
* –ø—Ä–æ—Ç–æ–∫–æ–ª –î–∏—Ñ—Ñ–∏‚Äî–•–µ–ª–ª–º–∞–Ω–∞ –¥–ª—è –≤—ã—Ä–∞–±–æ—Ç–∫–∏ –æ–±—â–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞,
* —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π,
* —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –∏ C++‚Äë–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è.

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ø—Ä–æ–µ–∫—Ç —É—á–µ–±–Ω—ã–π. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è production‚Äë–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

* üì° WebSocket‚Äë—Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç
* üîë –û–±–º–µ–Ω –∫–ª—é—á–∞–º–∏ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Diffie‚ÄìHellman
* üîê –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è
* üßµ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
* üíª –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Windows / Linux)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

### 1Ô∏è‚É£ `diffie-hellman.h`

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

* –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–µ–π;
* –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞;
* —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ XOR‚Äë—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.

### 2Ô∏è‚É£ `messenger.cpp`

–†–µ–∞–ª–∏–∑—É–µ—Ç:

* WebSocket‚Äë—Å–µ—Ä–≤–µ—Ä;
* WebSocket‚Äë–∫–ª–∏–µ–Ω—Ç;
* –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏;
* —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.

---

## üîê –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* **Diffie‚ÄìHellman (DH)** ‚Äî –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –≤—ã—Ä–∞–±–æ—Ç–∫–∏ –æ–±—â–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞ –ø–æ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É.
* **–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ XOR‚Äë—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π.

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å DH‚Äë—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è

1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
2. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π DH‚Äë–∫–ª—é—á
3. –ö–ª–∏–µ–Ω—Ç –≤—ã—á–∏—Å–ª—è–µ—Ç –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
4. –°–µ—Ä–≤–µ—Ä –≤—ã—á–∏—Å–ª—è–µ—Ç –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç
5. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ

```
Client                Server
  |    connect()        |
  |------------------->|
  |     DH public key   |
  |<-------------------|
  |     DH public key   |
  |------------------->|
  |  encrypted traffic  |
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ messenger.cpp        # –ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä WebSocket
‚îú‚îÄ‚îÄ diffie-hellman.h     # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Diffie‚ÄìHellman + XOR
‚îú‚îÄ‚îÄ CMakeLists.txt      
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* C++17 –∏–ª–∏ –Ω–æ–≤–µ–µ
* `ixwebsocket`
* `CMake` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

---

### –°–±–æ—Ä–∫–∞

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

---

## ‚ñ∂Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```text
1 <port>
```

–ü—Ä–∏–º–µ—Ä:

```
1 8080
```

### –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞

```text
2 <ip> <port>
```

–ü—Ä–∏–º–µ—Ä:

```
2 127.0.0.1 8080
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

* –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∏—Ñ—Ä—É—é—Ç—Å—è;
* –∫–æ–º–∞–Ω–¥–∞ `exit` –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

–î–ª—è —Ä–∞–±–æ—Ç—ã –≤ localhost:8080 –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å 
```
1 0
```
```
2 0 0
```

## üîé –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* –º–∞–ª–µ–Ω—å–∫–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —á–∏—Å–ª–æ `p` (—É—á–µ–±–Ω–æ–µ)
* XOR –≤–º–µ—Å—Ç–æ –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
* –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (MITM –≤–æ–∑–º–æ–∂–µ–Ω)
* –ü—Ä–æ–µ–∫—Ç –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö 

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö.

---

## ‚ú® –ê–≤—Ç–æ—Ä

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ —Ç–µ–º–µ:
**¬´–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π P2P –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä¬ª**

–ï—Å–ª–∏ –≤—ã –∏–∑—É—á–∞–µ—Ç–µ —Å–µ—Ç–∏, C++ –∏–ª–∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—é ‚Äî —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞.
